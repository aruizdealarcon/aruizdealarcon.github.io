<!DOCTYPE html>
<html>
  <head>
    <script>
      function tikzReplace(){
        let ntext = document.getElementById("myInp").value;
        ntext = ntext.replaceAll(/\\pic\[fill=white/g, "\\node[white tensor");
        ntext = ntext.replaceAll(/\\pic\[orange/g, "\\node[orange tensor");
        ntext = ntext.replaceAll(/\\pic\[red/g, "\\node[red tensor");
        ntext = ntext.replaceAll(/\\pic\[blue/g, "\\node[blue tensor");
        ntext = ntext.replaceAll(/scale=1.25/g, "");
        ntext = ntext.replaceAll(/->/g, "arr");
        ntext = ntext.replaceAll(/darkorange/g, "virtual");
        ntext = ntext.replaceAll(/\\pic/g, "\\node[black tensor]");
        ntext = ntext.replaceAll(/\{ipe [A-Za-z0-9]+\}/g, "{}");
        ntext = ntext.replaceAll(/\[ipe import, baseline, trim left\]/g, "[scale=0.01]");
        ntext = ntext.replaceAll(/, ,/g, ",");
        ntext = ntext.replaceAll(/\]\n\s+at\s\(/g, "] at (");
        ntext = ntext.replaceAll(/\b\d+\.\d{4}\b/g, (match) => { return parseFloat(match).toFixed(3); });
        document.getElementById("myOutp").value = ntext;
      }
    </script>
    <script>
      function tikzRepCopy(){
         tikzReplace();
        var copyText = document.getElementById("myOutp");
        copyText.select();
        copyText.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(copyText.value);
      }
    </script>
  </head>
  <!-- 
        ntext = ntext.replace('\\pic[orange]', '\\node[red tensor]');
        ntext = ntext.replace('{ipe disk}', '{}');
        ntext = ntext.replace('{ipe fdisk}', '{}');
        ntext = ntext.replace('[ipe import, baseline, trim left]', '[scale=0.01]');
        ntext = ntext.replace('darkorange', 'virtual');
        ntext = ntext.replace('\\pic', '\\node');
  -->
  <body>
    <textarea rows="40" cols="70" id="myInp"></textarea>
    <textarea rows="40" cols="70" id="myOutp"></textarea>
    <button id="button" onclick="tikzReplace();">Convert</button>
    <button id="button" onclick="tikzRepCopy();">Convert+Copy</button>
  </body>
</html>
